function FuzzySearchStrategy(t,e){return null!==t&&(fuzzysearch=require("fuzzysearch"))(e.toLowerCase(),t.toLowerCase())}function jsonLoader(t,e){var n,r,o=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");o.open("GET",t,!0),o.onreadystatechange=(n=o,r=e,function(){if(4===n.readyState&&200===n.status)try{r(null,JSON.parse(n.responseText))}catch(t){r(t,null)}}),o.send()}function LiteralSearchStrategy(e,t){return!!e&&(e=e.trim().toLowerCase(),(t=t.endsWith(" ")?[t.toLowerCase()]:t.trim().toLowerCase().split(" ")).filter(t=>0<=e.indexOf(t)).length===t.length)}function OptionsValidator(t){if(!((e=t)&&"undefined"!=typeof e.required&&e.required instanceof Array))throw new Error("-- OptionsValidator: required options missing");var e;if(!(this instanceof OptionsValidator))return new OptionsValidator(t);const r=t.required;this.getRequiredOptions=function(){return r},this.validate=function(e){const n=[];return r.forEach(function(t){"undefined"==typeof e[t]&&n.push(t)}),n}}function NoSort(){return 0}const data=[];let opt={};function repository_put(t){return isObject(t)?addObject(t):isArray(t)?addArray(t):undefined}function clear(){return data.length=0,data}function isObject(t){return Boolean(t)&&"[object Object]"===Object.prototype.toString.call(t)}function isArray(t){return Boolean(t)&&"[object Array]"===Object.prototype.toString.call(t)}function addObject(t){return data.push(t),data}function addArray(n){var r=[];clear();for(let t=0,e=n.length;t<e;t++)isObject(n[t])&&r.push(addObject(n[t]));return r}function repository_search(t){return t||"string"!=typeof t?t?findMatches(data,t,opt.searchStrategy,opt).sort(opt.sort):[]:data.sort(opt.sort)}function repository_setOptions(t){(opt=t||{}).fuzzy=t.fuzzy||!1,opt.limit=t.limit||10,opt.searchStrategy=t.fuzzy?FuzzySearchStrategy:LiteralSearchStrategy,opt.sort=t.sort||NoSort,opt.exclude=t.exclude||[]}function findMatches(e,n,r,o){var i=[];for(let t=0;t<e.length&&i.length<o.limit;t++){var s=findMatchesInObject(e[t],n,r,o);s&&i.push(s)}return i}function findMatchesInObject(t,e,n,r){for(const o in t)if(!isExcluded(t[o],r.exclude)&&n(t[o],e))return t}function isExcluded(n,r){for(let t=0,e=r.length;t<e;t++){var o=r[t];if(new RegExp(o).test(n))return!0}return!1}opt.fuzzy=!1,opt.limit=10,opt.searchStrategy=opt.fuzzy?FuzzySearchStrategy:LiteralSearchStrategy,opt.sort=NoSort,opt.exclude=[];const templaterOptions={pattern:/\{(.*?)\}/g,template:"",middleware:()=>{}},templater={setOptions:function(t){templaterOptions.pattern=t.pattern||templaterOptions.pattern,templaterOptions.template=t.template||templaterOptions.template,"function"==typeof t.middleware&&(templaterOptions.middleware=t.middleware)},compile:function(r){return templaterOptions.template.replace(templaterOptions.pattern,function(t,e){var n=templaterOptions.middleware(e,r[e],templaterOptions.template);return void 0!==n?n:r[e]||t})}};let options={searchInput:null,resultsContainer:null,json:[],success:Function.prototype,searchResultTemplate:'<li><a href="{url}" title="{desc}">{title}</a></li>',templateMiddleware:Function.prototype,sortMiddleware:function(){return 0},noResultsText:"No results found",limit:10,fuzzy:!1,debounceTime:null,exclude:[],onSearch:Function.prototype},debounceTimerHandle;const debounce=function(t,e){e?(clearTimeout(debounceTimerHandle),debounceTimerHandle=setTimeout(t,e)):t.call()},requiredOptions=["searchInput","resultsContainer","json"],optionsValidator=OptionsValidator({required:requiredOptions});function initWithJSON(t){repository_put(t),registerInput()}function initWithURL(n){jsonLoader(n,function(t,e){t&&throwError("failed to get JSON ("+n+")"),initWithJSON(e)})}function emptyResultsContainer(){options.resultsContainer.innerHTML=""}function appendToResultsContainer(t){options.resultsContainer.innerHTML+=t}function registerInput(){options.searchInput.addEventListener("input",function(t){isWhitelistedKey(t.which)&&(emptyResultsContainer(),debounce(function(){search(t.target.value)},options.debounceTime))})}function search(t){isValidQuery(t)&&(emptyResultsContainer(),render(repository_search(t),t),"function"==typeof options.onSearch)&&options.onSearch.call()}function render(e,n){var r=e.length;if(0===r)return appendToResultsContainer(options.noResultsText);for(let t=0;t<r;t++)e[t].query=n,appendToResultsContainer(templater.compile(e[t]))}function isValidQuery(t){return"string"==typeof t}function isWhitelistedKey(t){return-1===[13,16,20,37,38,39,40,91].indexOf(t)}function throwError(t){throw new Error("SimpleJekyllSearch --- "+t)}window.SimpleJekyllSearch=function(t){0<optionsValidator.validate(t).length&&throwError("You must specify the following required options: "+requiredOptions),options=utils.merge(options,t),templater.setOptions({template:options.searchResultTemplate,middleware:options.templateMiddleware}),repository_setOptions({fuzzy:options.fuzzy,limit:options.limit,sort:options.sortMiddleware,exclude:options.exclude}),(utils.isJSON(options.json)?initWithJSON:initWithURL)(options.json);t={search:search};return"function"==typeof options.success&&options.success.call(t),t};const utils={merge:function(t,e){var n={};for(const r in t)n[r]=t[r],"undefined"!=typeof e[r]&&(n[r]=e[r]);return n},isJSON:function(t){try{return t instanceof Object&&JSON.parse(JSON.stringify(t))?!0:!1}catch(e){return!1}}};